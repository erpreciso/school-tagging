{% extends "backbone.html" %}

{% block title %}
{% if language == "IT" %}
applicazione school-tagging
{% elif language == "EN" %}
school-tagging application
{% endif %}

{% endblock %}

{% block wrapper %}
<div id="wrapper">
	{% if language == "IT" %}
	<header>
		<div id="title">
			<h1><a href="/welcome">Applicazione School Tagging</a></h1>
		</div>
		<div id="login_tools">
			{% if not username %}
			<a href="/check/in">Entra</a>
			|
			<a href="/check/up">Registrati</a>
			|
			{% else %}
			<a href="/check/out">Disconnetti</a>
			|
			{% endif %}
			Stato connessione: <div id="connection_status"></div>
		</div>
	</header>
	<div id="welcome">Benvenuto {{username}}</div>
	<button id="show_html">mostra html</button>
	{% elif language == "EN" %}
	<header>
		<div id="title">
			<h1><a href="/welcome">School Tagging application</a></h1>
		</div>
		<div id="login_tools">
			{% if not username %}
			<a href="/check/in">Login</a>
			|
			<a href="/check/up">Signup</a>
			|
			{% else %}
			<a href="/check/out">Logout</a>
			|
			{% endif %}
			Connection status: <div id="connection_status"></div>
		</div>
	</header>
	<div id="welcome">Welcome {{username}}</div>
	<button id="show_html">show html code</button>
	{% endif %}
	{% block payload %}
<!--
	
-->
	{% endblock %}
	<footer>
		<div id="userlist">
			{% if language == "IT" %}
			<div>Chi c'Ã¨ loggato</div>
			{% elif language == "EN" %}
			<div>Who's logged in</div>
			{% endif %}
		{% for user in logged %}
			<div class="user" id="logged_{{user}}">
				<div><strong>{{user}}</strong></div>
			</div>
		{% endfor %}
		</div>
	</footer>
</div>
<!--
	javascript code for the Channel API
-->
<script>
	channel = new goog.appengine.Channel('{{token}}');
	socket = channel.open();
	socket.onopen = onOpened;
	socket.onmessage = onMessage;
	socket.onerror = function(){};
	socket.onclose = onClose;
</script>
{% endblock %}
